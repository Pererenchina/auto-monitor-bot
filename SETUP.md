# Инструкция по настройке и запуску

## Установка

1. Установите Python 3.10 или выше
2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Настройка

1. Создайте файл `.env` в корне проекта:
```
BOT_TOKEN=your_telegram_bot_token_here
DATABASE_URL=sqlite+aiosqlite:///./auto_monitor.db
```

2. Получите токен бота:
   - Откройте Telegram и найдите бота @BotFather
   - Отправьте команду `/newbot`
   - Следуйте инструкциям для создания бота
   - Скопируйте полученный токен в файл `.env`

## Запуск

```bash
python main.py
```

## Важные замечания

### API сайтов

Реальные API сайтов могут отличаться от реализованных в парсерах. Возможно, потребуется:

1. **av.by**: Проверить актуальные эндпоинты API через DevTools браузера
2. **kufar.by**: Убедиться в правильности GraphQL запросов или JSON эндпоинтов
3. **ab.onliner.by**: Проверить актуальный формат API запросов
4. **abw.by**: Возможно потребуется обновить селекторы для парсинга HTML

### Обход защиты

Некоторые сайты используют Cloudflare или другие системы защиты. В коде используется библиотека `cloudscraper`, но может потребоваться дополнительная настройка заголовков или использование прокси.

### Настройка интервала проверки

По умолчанию проверка происходит каждые 15 минут. Вы можете изменить это в файле `main.py`:
```python
monitor.start(interval_minutes=15)  # Измените на нужное значение
```

## Структура проекта

- `main.py` - главный файл запуска
- `bot.py` - логика Telegram-бота
- `monitor.py` - фоновая задача мониторинга
- `database.py` - модели базы данных
- `db_manager.py` - менеджер работы с БД
- `notifications.py` - отправка уведомлений
- `parsers/` - парсеры для каждого сайта

## Устранение неполадок

1. **Бот не отвечает**: Проверьте правильность токена в `.env`
2. **Ошибки парсинга**: Проверьте логи в `bot.log`, возможно нужно обновить парсеры
3. **База данных**: При проблемах удалите файл `auto_monitor.db` для пересоздания
